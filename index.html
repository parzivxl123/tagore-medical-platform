<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tagore Medical Robotics Platform</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide icons as inline SVGs
        const Brain = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/>
                <path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/>
                <path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"/>
                <path d="M17.599 6.5a3 3 0 0 0 .399-1.375"/>
                <path d="M6.003 5.125A3 3 0 0 0 6.401 6.5"/>
                <path d="M3.477 10.896a4 4 0 0 1 .585-.396"/>
                <path d="M19.938 10.5a4 4 0 0 1 .585.396"/>
                <path d="M6 18a4 4 0 0 1-1.967-.516"/>
                <path d="M19.967 17.484A4 4 0 0 1 18 18"/>
            </svg>
        );

        const MessageSquare = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
        );

        const Printer = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="6 9 6 2 18 2 18 9"/>
                <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                <rect x="6" y="14" width="12" height="8"/>
            </svg>
        );

        const TestTube = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5s-2.5-1.1-2.5-2.5V2"/>
                <path d="M8.5 2h7"/>
                <path d="M14.5 16h-5"/>
            </svg>
        );

        const CheckCircle = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
        );

        const XCircle = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="15" y1="9" x2="9" y2="15"/>
                <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
        );

        const AlertCircle = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
        );

        const TagoreMedicalPlatform = () => {
            const [activeTab, setActiveTab] = useState('diagnostic');
            const [symptoms, setSymptoms] = useState({
                fever: false,
                cough: false,
                chestPain: false,
                shortnessOfBreath: false,
                fatigue: false,
                headache: false,
                nausea: false,
                abdominalPain: false,
                jointPain: false,
                rashSkin: false,
                dizziness: false,
                soreThroat: false
            });

            const [vitals, setVitals] = useState({
                temperature: 98.6,
                heartRate: 72,
                bloodPressure: '120/80',
                oxygenSaturation: 98
            });

            const [labResults, setLabResults] = useState({
                wbcCount: 7000,
                rbcCount: 5.0,
                plateletCount: 250000,
                crpLevel: 5
            });

            const [diagnosis, setDiagnosis] = useState(null);
            const [chatMessages, setChatMessages] = useState([]);
            const [chatInput, setChatInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [prostheticSpecs, setProstheticSpecs] = useState({
                type: 'knee',
                length: 150,
                width: 80,
                material: 'titanium'
            });
            const [qaResults, setQaResults] = useState(null);

            const runDiagnosticEngine = () => {
                let conditions = [];
                let urgency = 'LOW';
                let recommendations = [];

                if (symptoms.fever && symptoms.cough && symptoms.shortnessOfBreath) {
                    if (vitals.temperature > 100.4 && vitals.oxygenSaturation < 95) {
                        conditions.push({
                            name: 'Severe Pneumonia',
                            probability: 85,
                            reasoning: 'High fever + productive cough + low O2 saturation indicates severe respiratory infection'
                        });
                        urgency = 'HIGH';
                        recommendations.push('Immediate chest X-ray required');
                        recommendations.push('Consider ICU admission');
                        recommendations.push('Start broad-spectrum antibiotics');
                    } else if (vitals.temperature > 99.5) {
                        conditions.push({
                            name: 'Moderate Pneumonia',
                            probability: 70,
                            reasoning: 'Fever with respiratory symptoms suggests lung infection'
                        });
                        urgency = 'MEDIUM';
                        recommendations.push('Chest X-ray recommended');
                        recommendations.push('Antibiotic therapy');
                    }
                } else if (symptoms.cough && symptoms.soreThroat && symptoms.fever) {
                    if (vitals.temperature < 101) {
                        conditions.push({
                            name: 'Upper Respiratory Infection',
                            probability: 75,
                            reasoning: 'Mild fever with throat and cough symptoms indicates viral URI'
                        });
                        urgency = 'LOW';
                        recommendations.push('Rest and hydration');
                        recommendations.push('Symptomatic treatment');
                    }
                }

                if (symptoms.chestPain && symptoms.shortnessOfBreath) {
                    if (vitals.heartRate > 100 || vitals.bloodPressure.split('/')[0] > 140) {
                        conditions.push({
                            name: 'Acute Coronary Syndrome',
                            probability: 80,
                            reasoning: 'Chest pain + dyspnea + tachycardia suggests cardiac emergency'
                        });
                        urgency = 'CRITICAL';
                        recommendations.push('IMMEDIATE ECG and troponin levels');
                        recommendations.push('Activate cardiac catheterization lab');
                        recommendations.push('Aspirin and anticoagulation');
                    } else {
                        conditions.push({
                            name: 'Angina Pectoris',
                            probability: 60,
                            reasoning: 'Chest pain with exertion may indicate stable angina'
                        });
                        urgency = 'MEDIUM';
                        recommendations.push('Stress test recommended');
                        recommendations.push('Cardiology consultation');
                    }
                }

                if (symptoms.abdominalPain && symptoms.nausea) {
                    if (symptoms.fever && labResults.wbcCount > 11000) {
                        conditions.push({
                            name: 'Acute Appendicitis',
                            probability: 75,
                            reasoning: 'Abdominal pain + fever + elevated WBC suggests appendicitis'
                        });
                        urgency = 'HIGH';
                        recommendations.push('Immediate surgical consultation');
                        recommendations.push('Abdominal CT scan');
                        recommendations.push('NPO (nothing by mouth)');
                    } else if (!symptoms.fever) {
                        conditions.push({
                            name: 'Gastroenteritis',
                            probability: 65,
                            reasoning: 'GI symptoms without fever suggests viral gastroenteritis'
                        });
                        urgency = 'LOW';
                        recommendations.push('Oral rehydration');
                        recommendations.push('Monitor for dehydration');
                    }
                }

                if (symptoms.jointPain && symptoms.fatigue) {
                    if (labResults.crpLevel > 10 && symptoms.fever) {
                        conditions.push({
                            name: 'Rheumatoid Arthritis Flare',
                            probability: 70,
                            reasoning: 'Joint pain + elevated CRP + systemic symptoms'
                        });
                        urgency = 'MEDIUM';
                        recommendations.push('Rheumatology consultation');
                        recommendations.push('Anti-inflammatory medication');
                        recommendations.push('RF and anti-CCP antibody tests');
                    }
                }

                if (symptoms.headache && symptoms.dizziness) {
                    if (symptoms.fever && symptoms.nausea) {
                        conditions.push({
                            name: 'Meningitis',
                            probability: 65,
                            reasoning: 'Headache + fever + nausea requires meningitis evaluation'
                        });
                        urgency = 'HIGH';
                        recommendations.push('Lumbar puncture indicated');
                        recommendations.push('Blood cultures');
                        recommendations.push('Empiric antibiotics if bacterial suspected');
                    } else if (vitals.bloodPressure.split('/')[0] > 160) {
                        conditions.push({
                            name: 'Hypertensive Emergency',
                            probability: 70,
                            reasoning: 'Severe headache with elevated BP'
                        });
                        urgency = 'HIGH';
                        recommendations.push('Immediate BP lowering');
                        recommendations.push('Neurological monitoring');
                    }
                }

                if (symptoms.rashSkin && symptoms.fever) {
                    if (symptoms.jointPain) {
                        conditions.push({
                            name: 'Viral Exanthem with Arthritis',
                            probability: 60,
                            reasoning: 'Rash + fever + joint involvement'
                        });
                        urgency = 'MEDIUM';
                        recommendations.push('Viral panel testing');
                        recommendations.push('Monitor for progression');
                    }
                }

                if (conditions.length === 0) {
                    conditions.push({
                        name: 'Non-specific Symptoms',
                        probability: 40,
                        reasoning: 'Symptoms do not match clear diagnostic pattern'
                    });
                    recommendations.push('Continue monitoring');
                    recommendations.push('Follow-up in 24-48 hours');
                    recommendations.push('Return if symptoms worsen');
                }

                conditions.sort((a, b) => b.probability - a.probability);

                setDiagnosis({
                    conditions: conditions,
                    urgency: urgency,
                    recommendations: recommendations,
                    timestamp: new Date().toLocaleString()
                });
            };

            const sendChatMessage = async () => {
                if (!chatInput.trim()) return;

                const userMessage = { role: 'user', content: chatInput };
                setChatMessages(prev => [...prev, userMessage]);
                setChatInput('');
                setIsLoading(true);

                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 4000,
                            system: `You are MediBot, an advanced medical AI assistant integrated into the Tagore Medical Robotics Platform. You provide clear, professional medical guidance for healthcare professionals.

You are designed to assist with:
- Medical procedures and protocols
- Drug interactions and pharmacology
- Diagnostic reasoning and differential diagnoses
- Treatment planning and recommendations
- Medical calculations and dosing
- Emergency protocols and critical care guidance
- Surgical procedures and techniques
- Medical device usage and specifications
- Clinical research and evidence-based medicine

Never identify yourself as Claude or mention Anthropic. You are MediBot, purpose-built for the Tagore Medical Robotics Platform. Provide comprehensive, detailed responses to support healthcare professionals. Always remind users that you support clinical decision-making but do not replace professional medical judgment.`,
                            messages: [...chatMessages, userMessage].map(m => ({
                                role: m.role,
                                content: m.content
                            }))
                        })
                    });

                    const data = await response.json();
                    const assistantMessage = {
                        role: 'assistant',
                        content: data.content[0].text
                    };
                    setChatMessages(prev => [...prev, assistantMessage]);
                } catch (err) {
                    setChatMessages(prev => [...prev, {
                        role: 'assistant',
                        content: 'Error: Unable to process request. Please try again.'
                    }]);
                }
                setIsLoading(false);
            };

            const runQATests = () => {
                const tests = [];

                if (prostheticSpecs.type === 'knee') {
                    tests.push({
                        name: 'Knee Implant Length Verification',
                        status: prostheticSpecs.length >= 120 && prostheticSpecs.length <= 180 ? 'PASS' : 'FAIL',
                        details: `Length: ${prostheticSpecs.length}mm (Range: 120-180mm)`
                    });
                    tests.push({
                        name: 'Knee Implant Width Verification',
                        status: prostheticSpecs.width >= 60 && prostheticSpecs.width <= 100 ? 'PASS' : 'FAIL',
                        details: `Width: ${prostheticSpecs.width}mm (Range: 60-100mm)`
                    });
                } else if (prostheticSpecs.type === 'hip') {
                    tests.push({
                        name: 'Hip Implant Length Verification',
                        status: prostheticSpecs.length >= 100 && prostheticSpecs.length <= 160 ? 'PASS' : 'FAIL',
                        details: `Length: ${prostheticSpecs.length}mm (Range: 100-160mm)`
                    });
                }

                tests.push({
                    name: 'Material Biocompatibility',
                    status: ['titanium', 'ceramic', 'polymer'].includes(prostheticSpecs.material) ? 'PASS' : 'FAIL',
                    details: `Material: ${prostheticSpecs.material}`
                });

                if (diagnosis) {
                    tests.push({
                        name: 'Diagnostic Confidence Threshold',
                        status: diagnosis.conditions[0].probability >= 60 ? 'PASS' : 'WARNING',
                        details: `Top diagnosis confidence: ${diagnosis.conditions[0].probability}%`
                    });
                    tests.push({
                        name: 'Urgency Assessment',
                        status: diagnosis.urgency !== 'UNKNOWN' ? 'PASS' : 'FAIL',
                        details: `Urgency level: ${diagnosis.urgency}`
                    });
                }

                tests.push({
                    name: 'Vital Signs Range Check',
                    status: vitals.temperature < 105 && vitals.heartRate < 150 ? 'PASS' : 'WARNING',
                    details: 'All vitals within acceptable ranges'
                });

                setQaResults({
                    tests: tests,
                    overallStatus: tests.every(t => t.status === 'PASS') ? 'PASS' : 
                                   tests.some(t => t.status === 'FAIL') ? 'FAIL' : 'WARNING',
                    timestamp: new Date().toLocaleString()
                });
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-xl shadow-2xl overflow-hidden">
                            <div className="bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6">
                                <h1 className="text-3xl font-bold mb-2">Tagore Medical Robotics Platform</h1>
                                <p className="text-blue-100">Integrated AI-Powered Medical Ecosystem</p>
                                <p className="text-sm text-blue-200 mt-1">Gizmo Geeks 2025 - Tagore House</p>
                            </div>

                            <div className="flex border-b bg-gray-50 overflow-x-auto">
                                {[
                                    { id: 'diagnostic', label: 'Diagnostic Engine', icon: Brain },
                                    { id: 'chat', label: 'AI Assistant', icon: MessageSquare },
                                    { id: 'prosthetic', label: 'Prosthetics', icon: Printer },
                                    { id: 'qa', label: 'QA Testing', icon: TestTube }
                                ].map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex items-center gap-2 px-6 py-4 font-medium transition-colors whitespace-nowrap ${
                                            activeTab === tab.id
                                                ? 'bg-white text-blue-600 border-b-2 border-blue-600'
                                                : 'text-gray-600 hover:bg-gray-100'
                                        }`}
                                    >
                                        <tab.icon size={20} />
                                        {tab.label}
                                    </button>
                                ))}
                            </div>

                            <div className="p-6">
                                {activeTab === 'diagnostic' && (
                                    <div className="space-y-6">
                                        <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                                            <Brain className="text-blue-600" />
                                            Rule-Based Diagnostic Engine
                                        </h2>

                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div className="bg-gray-50 p-4 rounded-lg">
                                                <h3 className="font-semibold text-lg mb-3 text-gray-700">Patient Symptoms</h3>
                                                <div className="grid grid-cols-2 gap-2">
                                                    {Object.keys(symptoms).map(symptom => (
                                                        <label key={symptom} className="flex items-center gap-2 cursor-pointer">
                                                            <input
                                                                type="checkbox"
                                                                checked={symptoms[symptom]}
                                                                onChange={(e) => setSymptoms({...symptoms, [symptom]: e.target.checked})}
                                                                className="w-4 h-4 text-blue-600"
                                                            />
                                                            <span className="text-sm capitalize">{symptom.replace(/([A-Z])/g, ' $1').trim()}</span>
                                                        </label>
                                                    ))}
                                                </div>
                                            </div>

                                            <div className="bg-gray-50 p-4 rounded-lg">
                                                <h3 className="font-semibold text-lg mb-3 text-gray-700">Vital Signs</h3>
                                                <div className="space-y-3">
                                                    <div>
                                                        <label className="text-sm text-gray-600">Temperature (°F)</label>
                                                        <input
                                                            type="number"
                                                            value={vitals.temperature}
                                                            onChange={(e) => setVitals({...vitals, temperature: parseFloat(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                            step="0.1"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">Heart Rate (bpm)</label>
                                                        <input
                                                            type="number"
                                                            value={vitals.heartRate}
                                                            onChange={(e) => setVitals({...vitals, heartRate: parseInt(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">Blood Pressure</label>
                                                        <input
                                                            type="text"
                                                            value={vitals.bloodPressure}
                                                            onChange={(e) => setVitals({...vitals, bloodPressure: e.target.value})}
                                                            className="w-full px-3 py-2 border rounded"
                                                            placeholder="120/80"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">O2 Saturation (%)</label>
                                                        <input
                                                            type="number"
                                                            value={vitals.oxygenSaturation}
                                                            onChange={(e) => setVitals({...vitals, oxygenSaturation: parseInt(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                        />
                                                    </div>
                                                </div>
                                            </div>

                                            <div className="bg-gray-50 p-4 rounded-lg">
                                                <h3 className="font-semibold text-lg mb-3 text-gray-700">Laboratory Results</h3>
                                                <div className="space-y-3">
                                                    <div>
                                                        <label className="text-sm text-gray-600">WBC Count (cells/μL)</label>
                                                        <input
                                                            type="number"
                                                            value={labResults.wbcCount}
                                                            onChange={(e) => setLabResults({...labResults, wbcCount: parseInt(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">RBC Count (million/μL)</label>
                                                        <input
                                                            type="number"
                                                            value={labResults.rbcCount}
                                                            onChange={(e) => setLabResults({...labResults, rbcCount: parseFloat(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                            step="0.1"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">Platelet Count</label>
                                                        <input
                                                            type="number"
                                                            value={labResults.plateletCount}
                                                            onChange={(e) => setLabResults({...labResults, plateletCount: parseInt(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">CRP Level (mg/L)</label>
                                                        <input
                                                            type="number"
                                                            value={labResults.crpLevel}
                                                            onChange={(e) => setLabResults({...labResults, crpLevel: parseFloat(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                            step="0.1"
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <button
                                            onClick={runDiagnosticEngine}
                                            className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                                        >
                                            Run Diagnostic Analysis
                                        </button>

                                        {diagnosis && (
                                            <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border-2 border-blue-200">
                                                <div className="flex items-center justify-between mb-4">
                                                    <h3 className="text-xl font-bold text-gray-800">Diagnostic Results</h3>
                                                    <span className={`px-4 py-2 rounded-full font-semibold ${
                                                        diagnosis.urgency === 'CRITICAL' ? 'bg-red-600 text-white' :
                                                        diagnosis.urgency === 'HIGH' ? 'bg-orange-500 text-white' :
                                                        diagnosis.urgency === 'MEDIUM' ? 'bg-yellow-500 text-white' :
                                                        'bg-green-500 text-white'
                                                    }`}>
                                                        {diagnosis.urgency} URGENCY
                                                    </span>
                                                </div>

                                                <div className="space-y-4 mb-4">
                                                    <h4 className="font-semibold text-gray-700">Possible Conditions:</h4>
                                                    {diagnosis.conditions.map((condition, idx) => (
                                                        <div key={idx} className="bg-white p-4 rounded-lg shadow">
                                                            <div className="flex justify-between items-start mb-2">
                                                                <h5 className="font-bold text-lg text-blue-600">{condition.name}</h5>
                                                                <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">
                                                                    {condition.probability}% confidence
                                                                </span>
                                                            </div>
                                                            <p className="text-gray-600 text-sm italic">{condition.reasoning}</p>
                                                        </div>
                                                    ))}
                                                </div>

                                                <div className="bg-white p-4 rounded-lg">
                                                    <h4 className="font-semibold text-gray-700 mb-2">Recommendations:</h4>
                                                    <ul className="list-disc list-inside space-y-1">
                                                        {diagnosis.recommendations.map((rec, idx) => (
                                                            <li key={idx} className="text-gray-700">{rec}</li>
                                                        ))}
                                                    </ul>
                                                </div>

                                                <p className="text-xs text-gray-500 mt-4">Generated: {diagnosis.timestamp}</p>
                                            </div>
                                        )}
                                    </div>
                                )}

                                {activeTab === 'chat' && (
                                    <div className="space-y-4">
                                        <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                                            <MessageSquare className="text-blue-600" />
                                            Medical Assistant AI
                                        </h2>

                                        <div className="bg-gray-50 rounded-lg p-4 h-96 overflow-y-auto space-y-3">
                                            {chatMessages.length === 0 && (
                                                <div className="text-center text-gray-500 mt-20">
                                                    <MessageSquare size={48} className="mx-auto mb-4 text-gray-400" />
                                                    <p>Ask me about medical procedures, drug interactions, or protocols</p>
                                                </div>
                                            )}
                                            {chatMessages.map((msg, idx) => (
                                                <div
                                                    key={idx}
                                                    className={`p-3 rounded-lg ${
                                                        msg.role === 'user'
                                                            ? 'bg-blue-600 text-white ml-12'
                                                            : 'bg-white text-gray-800 mr-12 shadow'
                                                    }`}
                                                >
                                                    <p className="text-sm whitespace-pre-wrap">{msg.content}</p>
                                                </div>
                                            ))}
                                            {isLoading && (
                                                <div className="bg-white p-3 rounded-lg mr-12 shadow">
                                                    <p className="text-gray-500 italic">Processing...</p>
                                                </div>
                                            )}
                                        </div>

                                        <div className="flex gap-2">
                                            <input
                                                type="text"
                                                value={chatInput}
                                                onChange={(e) => setChatInput(e.target.value)}
                                                onKeyPress={(e) => e.key === 'Enter' && sendChatMessage()}
                                                placeholder="Ask about procedures, medications, or protocols..."
                                                className="flex-1 px-4 py-3 border rounded-lg"
                                                disabled={isLoading}
                                            />
                                            <button
                                                onClick={sendChatMessage}
                                                disabled={isLoading}
                                                className="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-400"
                                            >
                                                Send
                                            </button>
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'prosthetic' && (
                                    <div className="space-y-6">
                                        <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                                            <Printer className="text-blue-600" />
                                            Prosthetics Manufacturing Unit
                                        </h2>

                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div className="bg-gray-50 p-4 rounded-lg">
                                                <h3 className="font-semibold text-lg mb-3 text-gray-700">Implant Specifications</h3>
                                                <div className="space-y-3">
                                                    <div>
                                                        <label className="text-sm text-gray-600">Implant Type</label>
                                                        <select
                                                            value={prostheticSpecs.type}
                                                            onChange={(e) => setProstheticSpecs({...prostheticSpecs, type: e.target.value})}
                                                            className="w-full px-3 py-2 border rounded"
                                                        >
                                                            <option value="knee">Knee Replacement</option>
                                                            <option value="hip">Hip Replacement</option>
                                                            <option value="shoulder">Shoulder Implant</option>
                                                            <option value="spinal">Spinal Implant</option>
                                                        </select>
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">Length (mm)</label>
                                                        <input
                                                            type="number"
                                                            value={prostheticSpecs.length}
                                                            onChange={(e) => setProstheticSpecs({...prostheticSpecs, length: parseInt(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">Width (mm)</label>
                                                        <input
                                                            type="number"
                                                            value={prostheticSpecs.width}
                                                            onChange={(e) => setProstheticSpecs({...prostheticSpecs, width: parseInt(e.target.value)})}
                                                            className="w-full px-3 py-2 border rounded"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-sm text-gray-600">Material</label>
                                                        <select
                                                            value={prostheticSpecs.material}
                                                            onChange={(e) => setProstheticSpecs({...prostheticSpecs, material: e.target.value})}
                                                            className="w-full px-3 py-2 border rounded"
                                                        >
                                                            <option value="titanium">Medical-Grade Titanium</option>
                                                            <option value="ceramic">Bioceramics</option>
                                                            <option value="polymer">Biocompatible Polymer</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div className="bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg border-2 border-blue-200">
                                                <h3 className="font-semibold text-lg mb-4 text-gray-700">Manufacturing Preview</h3>
                                                <div className="bg-white p-4 rounded-lg shadow-md mb-4">
                                                    <div className="flex items-center justify-center h-48 bg-gray-100 rounded">
                                                        <Printer size={64} className="text-blue-400" />
                                                    </div>
                                                </div>
                                                <div className="space-y-2 text-sm">
                                                    <p><strong>Type:</strong> {prostheticSpecs.type.toUpperCase()}</p>
                                                    <p><strong>Dimensions:</strong> {prostheticSpecs.length}mm × {prostheticSpecs.width}mm</p>
                                                    <p><strong>Material:</strong> {prostheticSpecs.material}</p>
                                                    <p><strong>Estimated Print Time:</strong> {Math.floor(prostheticSpecs.length / 10)} hours</p>
                                                </div>
                                            </div>
                                        </div>

                                        <button
                                            onClick={runQATests}
                                            className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors"
                                        >
                                            Validate Design & Run QA Tests
                                        </button>
                                    </div>
                                )}

                                {activeTab === 'qa' && (
                                    <div className="space-y-6">
                                        <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                                            <TestTube className="text-blue-600" />
                                            Quality Assurance & Verification System
                                        </h2>

                                        <div className="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                            <h3 className="font-semibold text-gray-700 mb-2">Testing Protocol Overview</h3>
                                            <p className="text-sm text-gray-600">
                                                Multi-layered verification system ensuring safety, compatibility, and effectiveness across all platform modules.
                                            </p>
                                        </div>

                                        <button
                                            onClick={runQATests}
                                            className="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors"
                                        >
                                            Run Complete QA Test Suite
                                        </button>

                                        {qaResults && (
                                            <div className="space-y-4">
                                                <div className={`p-4 rounded-lg border-2 ${
                                                    qaResults.overallStatus === 'PASS' ? 'bg-green-50 border-green-500' :
                                                    qaResults.overallStatus === 'FAIL' ? 'bg-red-50 border-red-500' :
                                                    'bg-yellow-50 border-yellow-500'
                                                }`}>
                                                    <div className="flex items-center gap-3 mb-2">
                                                        {qaResults.overallStatus === 'PASS' ? (
                                                            <CheckCircle size={32} className="text-green-600" />
                                                        ) : qaResults.overallStatus === 'FAIL' ? (
                                                            <XCircle size={32} className="text-red-600" />
                                                        ) : (
                                                            <AlertCircle size={32} className="text-yellow-600" />
                                                        )}
                                                        <div>
                                                            <h3 className="text-xl font-bold text-gray-800">
                                                                Overall Status: {qaResults.overallStatus}
                                                            </h3>
                                                            <p className="text-sm text-gray-600">{qaResults.timestamp}</p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div className="space-y-3">
                                                    {qaResults.tests.map((test, idx) => (
                                                        <div
                                                            key={idx}
                                                            className={`p-4 rounded-lg border ${
                                                                test.status === 'PASS' ? 'bg-green-50 border-green-300' :
                                                                test.status === 'FAIL' ? 'bg-red-50 border-red-300' :
                                                                'bg-yellow-50 border-yellow-300'
                                                            }`}
                                                        >
                                                            <div className="flex items-start justify-between">
                                                                <div className="flex-1">
                                                                    <div className="flex items-center gap-2 mb-1">
                                                                        {test.status === 'PASS' ? (
                                                                            <CheckCircle size={20} className="text-green-600" />
                                                                        ) : test.status === 'FAIL' ? (
                                                                            <XCircle size={20} className="text-red-600" />
                                                                        ) : (
                                                                            <AlertCircle size={20} className="text-yellow-600" />
                                                                        )}
                                                                        <h4 className="font-semibold text-gray-800">{test.name}</h4>
                                                                    </div>
                                                                    <p className="text-sm text-gray-600 ml-7">{test.details}</p>
                                                                </div>
                                                                <span className={`px-3 py-1 rounded-full text-xs font-bold ${
                                                                    test.status === 'PASS' ? 'bg-green-600 text-white' :
                                                                    test.status === 'FAIL' ? 'bg-red-600 text-white' :
                                                                    'bg-yellow-600 text-white'
                                                                }`}>
                                                                    {test.status}
                                                                </span>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>

                                                <div className="bg-gray-50 p-4 rounded-lg">
                                                    <h4 className="font-semibold text-gray-700 mb-2">Test Summary</h4>
                                                    <div className="grid grid-cols-3 gap-4 text-center">
                                                        <div>
                                                            <p className="text-2xl font-bold text-green-600">
                                                                {qaResults.tests.filter(t => t.status === 'PASS').length}
                                                            </p>
                                                            <p className="text-sm text-gray-600">Passed</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-2xl font-bold text-yellow-600">
                                                                {qaResults.tests.filter(t => t.status === 'WARNING').length}
                                                            </p>
                                                            <p className="text-sm text-gray-600">Warnings</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-2xl font-bold text-red-600">
                                                                {qaResults.tests.filter(t => t.status === 'FAIL').length}
                                                            </p>
                                                            <p className="text-sm text-gray-600">Failed</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {!qaResults && (
                                            <div className="text-center py-12 text-gray-500">
                                                <TestTube size={48} className="mx-auto mb-4 text-gray-400" />
                                                <p>Run the test suite to view quality assurance results</p>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="mt-6 text-center text-gray-600 text-sm">
                            <p className="font-semibold">Team: Aarush Manglunia, Arjun Patel, Arya Phad, Samaara Mohid</p>
                            <p className="text-xs mt-1">Gizmo Geeks 2025 - Tagore House</p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<TagoreMedicalPlatform />, document.getElementById('root'));
    </script>
</body>
</html>
